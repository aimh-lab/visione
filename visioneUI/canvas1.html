	<div id="canvasdiv1">
		<canvas id='canvas1' width=380 height=213
			style="border: 1px solid #000000;"></canvas>
	</div>
	<table>
		<tr valign="top">
			<td colspan="13" title="Scene description">Desc<input id='tern0'
				type="text" size="51"
				placeholder="E.g.: A tennis player serving a ball on the court"></td>
		</tr>
		<tr valign="top">
			<td colspan="13" title="Scene tags">Tags<input id='annotations0'
				type="text" size="51" placeholder="E.g.: wedding park sunset"></td>
		</tr>
		<tr valign="top">
			<td colspan="13" title="Max obj. number">Max Obj<input id='not0'
				type="text" size="47"
				placeholder="E.g.: 2 person 3 car 0 dog, means at most 2 persons, 3 cars, no dogs"></td>
		</tr>
	</table>

	<div class="row">
		<div class="col-7 top5">
			<div>
				<button id="clean0" class="btn btn-outline-info"
					title="clean canvas 1">
					<i class="fa fa-trash"></i> clean
				</button>
				<button id="undo0" class="btn btn-outline-info"
					title="undo clean canvas 1">
					<i class="fa fa-reply"></i> un-clean
				</button>
			</div>
		</div>
	</div>

<script type="text/javascript">
	$(document).ready(function(){
	
		$(function() {
			$("#dialog").dialog({
				autoOpen: false
			});
		});	
		includeHTML();
		canvas1 = get_canvas('canvas1', 'annotations0', 'not0');
		canvas2 = get_canvas('canvas2', 'annotations1', 'not1');
		canvases = [canvas1, canvas2];
		
		
		$('#content').on('drop', dropImage);
		
		
		$("#clean0").on('click', function(e) {
			console.log(isClean);
		//	if (!isClean) {
			    isClean = true;
				lastAnnotation = $("#annotations").val();
				lastNotField = $("#not").val();
				lastis43 = $("#is43").is(":checked");
				lastis169 = $("#is169").is(":checked");
				lastisColor = $("#isColor").is(":checked");
				lastisGray = $("#isGray").is(":checked");
				lastGrouped = $("#group").is(":checked");
				
				$("#annotations").val('');
				$("#not").val('');
				$('#is43').prop('checked', false);
				$('#is169').prop('checked', false);
				$('#isColor').prop('checked', false);
				$('#isGray').prop('checked', false);
				$('#group').prop('checked', false);
				
				canvasObjects = canvas1.getObjects();		
				
				canvas1.discardActiveObject().renderAll();
				canvas1.getObjects().forEach(function(o) {
					console.log("----> "+o.get('type'));
					if (o.get('type') != 'line') {
			        	$("#" + o.get('uuid')).hide();
			        	canvas1.remove(o);
					} 
			    })
			    
			    canvasObjects = canvas2.getObjects();		
				
				canvas2.discardActiveObject().renderAll();
				canvas2.getObjects().forEach(function(o) {
					console.log("----> "+o.get('type'));
					if (o.get('type') != 'line') {
			        	$("#" + o.get('uuid')).hide();
			        	canvas2.remove(o);
			        	
					} 
			    })
				txt = cell2Text(isClean);
		//	}
		});
		
		$("#tern0").keyup(function(event) {
		    if (event.keyCode === 13) {
		    	queryByTERN(document.getElementById('tern0').value, document.getElementById('tern1').value);
		    }
		});
		$("#tern1").keyup(function(event) {
		    if (event.keyCode === 13) {
		    	queryByTERN(document.getElementById('tern0').value, document.getElementById('tern1').value);
		    }
		});
		
		$("#undo0").on('click', function(e) {
			console.log(isClean);
			if (isClean) {
	        	isClean = false;
				$("#annotations").val(lastAnnotation);
				$("#not").val(lastNotField);
				$('#is43').prop('checked', lastis43);
				$('#is169').prop('checked', lastis169);
				$('#isColor').prop('checked', lastisColor);				
				$('#isGray').prop('checked', lastisGray);
				$('#group').prop('checked', lastGrouped);
				canvasObjects.forEach(function(o) {
					if (o.get('type') != 'line') {
				        canvas1.add(o);
			        	$("#" + o.get('uuid')).show();
					}
			    })
				txt = cell2Text();
			}
		});
		
		canvas1.renderAll();
		canvas2.renderAll();
	});
	</script>